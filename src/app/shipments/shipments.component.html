<app-nav-bar></app-nav-bar>

<div class="parent-container">
  <div class="container" [formGroup]="shipmentDetails">
    <h3>Materials Dispatch Form</h3>
    <div class="location-select-group">
      <div class="form-group mb-3">
        <label for="from">From:</label>
        <select id="from" class="form-control" formControlName="from">
          <option *ngFor="let loc of locations" [disabled]="shipmentDetails.get('to')?.value === loc" [value]="loc">
            {{ loc }}
          </option>
        </select>
      </div>

      <div class="form-group mb-3">
        <label for="to">To:</label>
        <select id="to" class="form-control" formControlName="to">
          <option *ngFor="let loc of locations" [disabled]="shipmentDetails.get('from')?.value === loc" [value]="loc">
            {{ loc }}
          </option>
        </select>
      </div>
    </div>


    <div class="form-group d-flex">
      <div class="form-group">
        <select id="selectItem" class="form-control" style="min-width: 100px;" placeholder="SelectItem"
          formControlName="message">
          <option value="" disabled selected>Select Item</option>

          <option *ngFor="let item of Items" [value]="item">
            {{ item }}
          </option>
        </select>
      </div>


      <input type="text" class="form-control" placeholder="Enter quantity" formControlName="quantity" min="1">

      <div class="form-group d-flex">
        <select id="unit" class="form-control" style="min-width: 100px;" placeholder="Units" formControlName="unit">
          <option value="" disabled selected>Units</option>
          <option *ngFor="let unit of units" [value]="unit">
            {{ unit }}
          </option>
        </select>
      </div>

      <button type="button" class="btn btn-success" (click)="addItem()">Add Item</button>
    </div>

    <div *ngIf="items.length > 0" class="mt-3 items-container">
      <label>Items</label>
      <ul class="list-group">
        <li *ngFor="let item of items.controls; let i = index"
          class="list-group-item d-flex justify-content-between align-items-center">
          {{ item.value.name }} - {{ item.value.quantity }}{{item.value.unit}}
          <button type="button" class="btn btn-sm btn-danger" (click)="removeItem(i)"><i
              class="bi bi-x-lg"></i></button>
        </li>
      </ul>
    </div>

    <div class="button-container">
      <button class="btn btn-primary" [disabled]="shipmentDetails.invalid || items.length === 0"
        (click)="onSubmit()">Confirm Dispatch</button>

      <button class="dispatch-Details" [routerLink]="['/dispatch-details']">Dispatch Details</button>
    </div>
    <!-- <div>
      <button [routerLink]="['/menu']">Menu</button>
    </div> -->

  </div>
</div>

<div class="snackbar" [class.show]="showSnackbar">
  Materials Dispatched!
</div>

<div class="logoutBtnContainer">
  <button class="logOutBtn" (click)="logOutUser()">
    <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-arrow-left-circle" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
    </svg>
    <span>LogOut</span>
  </button>
</div>

